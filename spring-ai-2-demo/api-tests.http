### Spring AI 2.0 - IntelliJ HTTP Client Tests
### Base URL: http://localhost:8080

###############################################################################
### 1. OpenAI SDK Integration - Responses API
###############################################################################

### Responses API with Web Search
# This uses OpenAI's Responses API directly (not available via Spring AI ChatClient)
# The model automatically searches the web and returns citations
POST http://localhost:8080/api/openai/responses/search
Content-Type: application/json

{
  "query": "What are the latest developments in Spring AI?"
}

### Responses API - Another example
POST http://localhost:8080/api/openai/responses/search
Content-Type: application/json

{
  "query": "What is the current price of Bitcoin?"
}

### Basic Chat (uses Spring AI ChatClient)
POST http://localhost:8080/api/openai/chat
Content-Type: text/plain

Tell me a joke about Java programming

###############################################################################
### 2. Anthropic Claude - Citations API
###############################################################################

### Citations - Get sourced responses from documents
POST http://localhost:8080/api/anthropic/citations
Content-Type: application/json

{
  "document": "The Eiffel Tower was completed in 1889. It stands 330 meters tall.",
  "title": "Eiffel Tower Facts",
  "question": "When was it built and how tall is it?"
}

### Citations - Longer document example
POST http://localhost:8080/api/anthropic/citations
Content-Type: application/json

{
  "document": "Spring AI 2.0 introduces several new features. The OpenAI SDK integration provides the Responses API with web search. Anthropic Claude now supports citations and document generation skills. Google Gemini is available through the GenAI starter. Redis can be used for persistent chat memory.",
  "title": "Spring AI 2.0 Features",
  "question": "What are the new features in Spring AI 2.0?"
}



###############################################################################
### 5. Redis Chat Memory
### Note: Requires Redis running (docker compose up -d)
###############################################################################

### Start a conversation - introduce yourself
POST http://localhost:8080/api/redis/chat/user123
Content-Type: application/json

{
  "message": "My name is Omar"
}

### Continue the conversation - test memory
POST http://localhost:8080/api/redis/chat/user123
Content-Type: application/json

{
  "message": "What is my name?"
}

### Ask another question in same conversation
POST http://localhost:8080/api/redis/chat/user123
Content-Type: application/json

{
  "message": "Can you summarize our conversation so far?"
}

### Start a different user conversation
POST http://localhost:8080/api/redis/chat/user456
Content-Type: application/json

{
  "message": "Hello, I'm Bob and I'm interested in Spring Boot"
}

### Get Conversation History
GET http://localhost:8080/api/redis/history/user123

### List Active Conversations
GET http://localhost:8080/api/redis/conversations

### Clear Conversation History
DELETE http://localhost:8080/api/redis/history/user123